version: 2

sources:
  - name: consumer
    description: "Consumer database containing stream tables and master consumer data"
    database: DEMO_VINCENT_VIRUTOSO
    schema: consumer
    tables:
      - name: stream_consumer
        description: "Stream table for consumer base data"
        columns:
          - name: consumerid
            description: "Unique consumer identifier"
            data_tests:
              - not_null
              - unique
          - name: sourcesystemtimestamp
            description: "Source system timestamp"
          - name: is_active
            description: "Consumer active status"
          - name: first_name
            description: "Consumer first name"
          - name: last_name
            description: "Consumer last name"
          - name: membernumber
            description: "Member number"
          - name: branch_member_number
            description: "Branch member number"
          - name: prefix
            description: "Name prefix"
          - name: suffix
            description: "Name suffix"
          - name: salutation
            description: "Salutation"
          - name: account_name
            description: "Account name"
          - name: address_line_1
            description: "Primary address line 1"
          - name: address_line_2
            description: "Primary address line 2"
          - name: aptsuite
            description: "Apartment/suite number"
          - name: city
            description: "City"
          - name: state
            description: "State"
          - name: zip
            description: "ZIP code"
          - name: country
            description: "Country"
          - name: secondary_address_line_1
            description: "Secondary address line 1"
          - name: secondary_address_line_2
            description: "Secondary address line 2"
          - name: secondary_aptsuite
            description: "Secondary apartment/suite"
          - name: secondary_city
            description: "Secondary city"
          - name: secondary_state
            description: "Secondary state"
          - name: secondary_zip
            description: "Secondary ZIP"
          - name: secondary_country
            description: "Secondary country"
          - name: secondary_address_from_month
            description: "Secondary address from month"
          - name: secondary_address_to_month
            description: "Secondary address to month"
          - name: primary_email
            description: "Primary email address"
          - name: phone_number
            description: "Phone number"
          - name: business_phone
            description: "Business phone"
          - name: cell_phone
            description: "Cell phone"
          - name: account_id
            description: "Account ID"
          - name: preferred_language
            description: "Preferred language"
          - name: fax_phone
            description: "Fax phone"
          - name: sourcesystem
            description: "Source system"
          - name: primary_agent_id
            description: "Primary agent ID"
          - name: data_source_id
            description: "Data source ID"
          - name: create_date
            description: "Create date"
          - name: isdeleted
            description: "Deleted flag"
          - name: deleted_timestamp
            description: "Deleted timestamp"

      - name: stream_consumer_extension
        description: "Stream table for consumer extension data"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: interface_id
            description: "Interface ID"
          - name: agent_interface_id
            description: "Agent interface ID"
          - name: extended_data
            description: "Extended data JSON"

      - name: stream_crm_consumer
        description: "Stream table for CRM consumer data"
        columns:
          - name: consumer_id
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: crm_consumer_id
            description: "CRM consumer ID"

      - name: stream_consumer_isrealperson
        description: "Stream table for real person validation"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: isrealperson
            description: "Is real person flag"

      - name: stream_consumer_seasonal_address_selector
        description: "Stream table for seasonal address selection"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: isseasonalflag
            description: "Seasonal address flag"

      - name: stream_consumer_email_marketing_override
        description: "Stream table for email marketing overrides"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: email_marketing_override
            description: "Email marketing override flag"

      - name: stream_special_dates
        description: "Stream table for special dates"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: anniversary
            description: "Anniversary date"
          - name: birthday
            description: "Birthday date"
          - name: wedding
            description: "Wedding date"

      - name: stream_additional_attributes
        description: "Stream table for additional consumer attributes"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: gender
            description: "Gender"
          - name: citizenship
            description: "Citizenship"
          - name: issmoker
            description: "Smoker flag"
          - name: customertraveltype
            description: "Customer travel type"
          - name: ismarketable
            description: "Marketable flag"

      - name: stream_append_attributes
        description: "Stream table for appended consumer attributes"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: age
            description: "Age"
          - name: incomerange
            description: "Income range"
          - name: mosaic
            description: "Mosaic segment"
          - name: mosaic_group
            description: "Mosaic group"

      - name: stream_travel_segment
        description: "Stream table for travel segment data"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: tourgroups
            description: "Tour groups"
          - name: touractive
            description: "Tour active flag"
          - name: tourspend12months
            description: "Tour spend 12 months"
          - name: tourhistory
            description: "Tour history"

      - name: stream_hotel_travel_segment
        description: "Stream table for hotel travel segment data"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: hotelexperiencebeach
            description: "Hotel beach experience"
          - name: hotelexperiencegolf
            description: "Hotel golf experience"
          - name: hotelspend12months
            description: "Hotel spend 12 months"
          - name: hotelhistory
            description: "Hotel history"

      - name: stream_profile_segment
        description: "Stream table for profile segment data"
        columns:
          - name: consumer_id
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: clientsegment
            description: "Client segment"

      - name: stream_profile
        description: "Stream table for detailed profile data"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: totaltripbudget_3000_8000
            description: "Trip budget 3000-8000"
          - name: destinations_hawaii
            description: "Hawaii destination preference"
          - name: interests_adventure
            description: "Adventure interest"
          - name: lifecycle_retired
            description: "Retired lifecycle"

      - name: stream_address_normalized
        description: "Stream table for normalized addresses"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: normalized_primary_address_1
            description: "Normalized primary address 1"
          - name: normalized_primary_city
            description: "Normalized primary city"
          - name: normalized_primary_state
            description: "Normalized primary state"
          - name: normalized_primary_zip
            description: "Normalized primary ZIP"
          - name: primary_geocode_id
            description: "Primary geocode ID"

      - name: stream_email_validation
        description: "Stream table for email validation"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: is_primary_email_valid
            description: "Primary email valid flag"
          - name: verified_primary_email
            description: "Verified primary email"

      - name: stream_agency_advisor_map
        description: "Stream table for agency advisor mapping"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: agencyid
            description: "Agency ID"
          - name: agencybranchid
            description: "Agency branch ID"
          - name: primary_advisor_id
            description: "Primary advisor ID"
          - name: marketing_advisor_id
            description: "Marketing advisor ID"
          - name: is_agency_active
            description: "Agency active flag"

      - name: stream_consumer_isexcluded
        description: "Stream table for consumer exclusion"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: is_excluded
            description: "Excluded flag"
          - name: exclude_reason
            description: "Exclusion reason"

      - name: stream_consumer_totalspend
        description: "Stream table for consumer total spend"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: totalspend12months
            description: "Total spend 12 months"

      - name: stream_consumer_soft_deleted
        description: "Stream table for soft deleted consumers"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
          - name: is_soft_deleted
            description: "Soft deleted flag"

      - name: consumer
        description: "Base consumer table for joins"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
              - unique

      - name: consumer_master
        description: "Master consumer table (target for merges)"
        columns:
          - name: consumerid
            description: "Consumer ID"
            data_tests:
              - not_null
              - unique
          - name: inserted_timestamp
            description: "Record inserted timestamp"
          - name: updated_timestamp
            description: "Record updated timestamp" 